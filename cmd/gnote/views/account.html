<!DOCTYPE html>
<html>
  <head>
    <title>Your Gnote Account</title>
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <link
      href="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/css/bootstrap.min.css"
      rel="stylesheet"
      integrity="sha384-1BmE4kWBq78iYhFldvKuhfTAU6auU8tT94WrHftjDbrCEXSU1oBoqyl2QvZ6jIW3"
      crossorigin="anonymous"
    />
    <link rel="stylesheet" href="/static/css/app.css" />
  </head>
  <body>
    <!-- Navbar -->
    <nav
      class="navbar navbar-expand-lg navbar-dark"
      style="background-color: #0000aa"
    >
      <div class="container-fluid">
        <a class="navbar-brand" href="/">Gnote</a>
        <button
          class="navbar-toggler"
          type="button"
          data-bs-toggle="collapse"
          data-bs-target="#navbarSupportedContent"
          aria-controls="navbarSupportedContent"
          aria-expanded="false"
          aria-label="Toggle navigation"
        >
          <span class="navbar-toggler-icon"></span>
        </button>
        <div class="collapse navbar-collapse" id="navbarSupportedContent">
          <ul class="navbar-nav me-auto mb-2 mb-lg-0">
            <li class="nav-item">
              <a class="nav-link" href="/">Home</a>
            </li>
            <li class="nav-item">
              <a class="nav-link active" aria-current="page" href="/account"
                >My Account</a
              >
            </li>
          </ul>
          <button class="btn btn-danger" onclick="logout()">Logout</button>
        </div>
      </div>
    </nav>
    <!-- Navbar -->
    <div class="container p-3">
      <div class="card">
        <div class="card-body">
          <div class="card-header"><h1>My account</h1></div>
          <p class="p-3 card-text lead">
            Welcome to your account settings! Having any trouble? Please
            <a href="">open an issue here</a>.
            <br />
            Your username is <b>@{{ username }}</b>. You have
            <b>{{ count }} note(s)</b> stored on Gnote.
          </p>
        </div>
      </div>
      <div class="card">
        <div class="card-body">
          <div class="card-header">
            <h1 class="text-danger">Danger zone</h1>
          </div>
          <p class="p-3 card-text lead">
            This section provides you with options to perform irreversible
            actions to your account including deleting all your notes or
            deleting your account altogether.
          </p>
          <a href="/delete/user"
            ><button class="btn btn-danger">Delete my account</button></a
          >
          <a href="/delete/notes"
            ><button class="btn btn-outline-danger">Delete all notes</button></a
          >
        </div>
      </div>
    </div>
    <script
      src="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/js/bootstrap.bundle.min.js"
      integrity="sha384-ka7Sk0Gln4gmtz2MlQnikT1wXgYsOg+OMhuP+IlRH9sENBO0LRn5q+8nbTov4+1p"
      crossorigin="anonymous"
    ></script>
    <script>
      function logout() {
        postData("/auth/logout", {}).then((data) => {
          window.location.href = "/";
        });
      }
      async function postData(url = "", data = {}) {
        // Default options are marked with *
        const response = await fetch(url, {
          method: "POST", // *GET, POST, PUT, DELETE, etc.
          mode: "cors", // no-cors, *cors, same-origin
          cache: "no-cache", // *default, no-cache, reload, force-cache, only-if-cached
          credentials: "same-origin", // include, *same-origin, omit
          headers: {
            "Content-Type": "application/json",
            // 'Content-Type': 'application/x-www-form-urlencoded',
          },
          redirect: "follow", // manual, *follow, error
          referrerPolicy: "no-referrer", // no-referrer, *no-referrer-when-downgrade, origin, origin-when-cross-origin, same-origin, strict-origin, strict-origin-when-cross-origin, unsafe-url
          body: JSON.stringify(data), // body data type must match "Content-Type" header
        });
        return response.json(); // parses JSON response into native JavaScript objects
      }
    </script>
  </body>
</html>
